<!--

To INCLUDE this file:

REQUIRED context:
	None

OPTIONAL context:
	expositions

-->

<!-- Should make this prettier -->

<table class="table table-bordered table-hover">
    <thead>
        <th> </th>
        <th>Name</th>
        <th>Created By</th>
        <th>Votes</th>
        <th>Options</th>
    </thead>
  <tbody>
    {% for e in expositions %}
      <tr>
          <td style="width:10px">
              <div class="arrow-up" item-type="1" vote-example-id="{{e.id}}" vote-type="1">
                  <i class="icon-arrow-up"></i>
              </div>
              <div class="arrow-down" item-type="1" vote-example-id="{{e.id}}" vote-type="0">
                  <i class="icon-arrow-down"></i>
              </div>
          </td>

        <td>
        	<a class="expo_link" data-toggle="modal" href="expo_modal" data-href="{{ e.link }}">
            {{ e.title }}
          </a>
        </td>
        <td>
          {{ e.owner }}
        </td>
          <td style="width:25px">
              <div class="votes-sum-{{e.id}}">
                  {{e.votes}}
              </div>
          </td>
        <td>
        {% if user.is_staff or user.is_superuser or e.owner == user %}
          <a href="{% url "expo_submit" e.id %}">
            <i class="icon-edit"></i>
          </a>
          <a href="{% url "delete_expo" e.id %}">
            <i class="icon-remove"></i>
          </a>
        {% else %}
          None
        {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>



<!-- Including a stylesheet here seems a bit hacky to me... -->
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/knoatom.css" />
<script type="text/javascript">
    $('textarea').addClass('span6').wysihtml5();
    $('.expo_link').each(function() {
        $(this).click(function() {
            $($('#expo_modal').children()[1]).html('<iframe style="width:1024px;height:400px" src="'+$(this).attr('data-href')+'">Loading...</iframe>'); 
            $('#expo_modal').modal('toggle').css({
                width:'auto',
                'margin-left':function(){
                    return -($(this).width()/2);
                }
            });
        })
    });
</script>
