<!--

To INCLUDE this file:

REQUIRED context:
	None

OPTIONAL context:
	notes

-->

<!-- Should make this prettier -->
<table id="notes" class="tablesorter">
  <thead>
    <tr>
      <th data-sorter="false"> </th>
      <th>Name</th>
      <th>Created By</th>
      <th>Votes</th>
      <th data-sorter="false">Options</th>
      <th style="display:none;">Is Stickied</th>
    </tr>
  </thead>
  <tbody>
    {% for e in stickied_notes %}
      <tr>
          <td style="width:10px">
              <div class="arrow-up" item-type="2" vote-example-id="{{e.id}}" vote-type="1">
                  <i class="icon-arrow-up"></i>
              </div>
              <div class="arrow-down" item-type="2" vote-example-id="{{e.id}}" vote-type="0">
                  <i class="icon-arrow-down"></i>
              </div>
          </td>
        <td>
        	<a target="_blank" href="{{ e.file.url }}">
            <div class="name-2-{{ e.id }}">
              {{ e.filename }} [stickied]
            </div>
          </a>
        </td>
        <td>
          {{ e.owner }}
        </td>
        <td style="width:75px">
            <div class="votes-sum-2-{{e.id}}">
                {{e.votes}}
            </div>
        </td>
        <td>
            <!-- Button to trigger modal -->
            <a href="#myModal{{e.id}}" data-toggle="modal">
                <i class="icon-flag"></i>
            </a>
            {% include "web/home/shared/sticky.html" with type=2 %}
        {% if user.is_staff or user.is_superuser or e.owner == user %}
          <a href="{% url "note_submit" e.id %}">
            <i class="icon-edit"></i>
          </a>
          <a href="{% url "delete_note" e.id %}">
            <i class="icon-remove"></i>
          </a>
        {% endif %}
        </td>
        <td style="display:none;"><div class="stickied-2-{{ e.id }}">1</div></td>
      </tr>
      <!-- Modal -->
      <div id="myModal{{e.id}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <form class="testForm" method="post" action="{{form_action}}">
              {% csrf_token %}
              <div class="form-actions">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                      <h3 id="myModalLabel">Make a Report: </h3>
                  </div>
                  <div class="modal-body">
                      {% include "web/form_template.html" with form=form %}
                      <input type="hidden" id="test" name="contentType" value="{{e|to_class_name}}"/>
                      <input type="hidden" id="test2" name="contentId" value="{{e.id}}"/>
                  </div>
                  <div class="modal-footer">
                      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                      <button class="btn btn-primary">Submit</button>
                  </div>
              </div>
          </form>
      </div>
      <!--End of Modal-->
    {% endfor %}
    
    {% for e in notes %}
      <tr>
          <td style="width:10px">
              <div class="arrow-up" item-type="2" vote-example-id="{{e.id}}" vote-type="1">
                  <i class="icon-arrow-up"></i>
              </div>
              <div class="arrow-down" item-type="2" vote-example-id="{{e.id}}" vote-type="0">
                  <i class="icon-arrow-down"></i>
              </div>
          </td>
        <td>
        	<a target="_blank" href="{{ e.file.url }}">
            <div class="name-2-{{ e.id }}">
              {{ e.filename }}
            </div>
          </a>
        </td>
        <td>
          {{ e.owner }}
        </td>
        <td style="width:75px">
            <div class="votes-sum-2-{{e.id}}">
                {{e.votes}}
            </div>
        </td>
        <td>
            <!-- Button to trigger modal -->
            <a href="#myModalLecNote{{e.id}}" data-toggle="modal">
                <i class="icon-flag"></i>
            </a>
            {% include "web/home/shared/sticky.html" with type=2 %}
        {% if user.is_staff or user.is_superuser or e.owner == user %}
          <a href="{% url "note_submit" e.id %}?next={{request.path}}">
            <i class="icon-edit"></i>
          </a>
          <a href="{% url "delete_note" e.id %}?next={{request.path}}">
            <i class="icon-remove"></i>
          </a>
        {% endif %}
        </td>
        <td style="display:none;"><div class="stickied-2-{{ e.id }}">0</div></td>
      </tr>
      <!-- Modal -->
      <div id="myModalLecNote{{e.id}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
          <form class="testForm" method="post" action="{{form_action}}">
              {% csrf_token %}
              <div class="form-actions">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                      <h3 id="myModalLabel">Make a Report: </h3>
                  </div>
                  <div class="modal-body">
                      {% include "web/form_template.html" with form=form %}
                      <input type="hidden" id="test" name="contentType" value="{{e|to_class_name}}"/>
                      <input type="hidden" id="test2" name="contentId" value="{{e.id}}"/>
                  </div>
                  <div class="modal-footer">
                      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                      <button class="btn btn-primary">Submit</button>
                  </div>
              </div>
          </form>
      </div>
      <!--End of Modal-->
    {% endfor %}
  </tbody>
</table>


<script>
// tablesorter 2.10.8
// Documentation found here:
// http://mottie.github.io/tablesorter/docs/index.html

// Bootstrap specific example here:
// http://mottie.github.io/tablesorter/docs/example-widget-bootstrap-theme.html
$(function() {

  $.extend($.tablesorter.themes.bootstrap, {
    // these classes are added to the table. To see other table classes available,
    // look here: http://twitter.github.com/bootstrap/base-css.html#tables
    table      : 'table table-bordered',
    header     : 'bootstrap-header', // give the header a gradient background
    footerRow  : '',
    footerCells: '',
    icons      : '', // add "icon-white" to make them white; this icon class is added to the <i> in the header
    sortNone   : 'bootstrap-icon-unsorted',
    sortAsc    : 'icon-chevron-up',
    sortDesc   : 'icon-chevron-down',
    active     : '', // applied when column is sorted
    hover      : '', // use custom css here - bootstrap class may not override it
    filterRow  : '', // filter row class
    even       : '', // odd row zebra striping
    odd        : ''  // even row zebra striping
  });

  // call the tablesorter plugin and apply the uitheme widget
  $("#notes").tablesorter({
    // this will apply the bootstrap theme if "uitheme" widget is included
    // the widgetOptions.uitheme is no longer required to be set
    theme : "bootstrap",

    widthFixed: true,

    headerTemplate : '{content} {icon}', // new in v2.7. Needed to add the bootstrap icon!
   
    // Set to always prepend a sort by stickied/not stickied in descending order on all user sorting
    sortForce : [[5,1]],
    
    // Set to sort initially by stickied then votes in descending order and name in ascending order
    sortList : [[5,1],[3,1]],
    
    // Set to always append a sort by votes in descending order on all user sorting
    sortAppend : [[3,1]],
    
    

    // widget code contained in the jquery.tablesorter.widgets.js file
    // use the zebra stripe widget if you plan on hiding any rows (filter widget)
    widgets : ["uitheme"] //,, "filter", "zebra" ],

   
  })

});
</script>

